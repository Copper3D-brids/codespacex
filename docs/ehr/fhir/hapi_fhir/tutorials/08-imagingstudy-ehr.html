<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>Tutorial - FHIR ImagingStudy with EHR data (Duke University data) | CodeSpaceX</title>
    <meta name="description" content="A knowledge base for EHR & CI/CD">
    <link rel="preload stylesheet" href="/codespacex/assets/style.9da2794f.css" as="style">
    
    <script type="module" src="/codespacex/assets/app.82bc7a38.js"></script>
    <link rel="preload" href="/codespacex/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/codespacex/assets/chunks/framework.f9076d03.js">
    <link rel="modulepreload" href="/codespacex/assets/chunks/theme.0b3df400.js">
    <link rel="modulepreload" href="/codespacex/assets/docs_ehr_fhir_hapi_fhir_tutorials_08-imagingstudy-ehr.md.e9f09927.lean.js">
    <link rel="icon" type="image/x-icon" href="/codespacex/logo_header.svg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/codespacex/" data-v-86d1bed8><!--[--><!--[--><!--[--><!--[--><div class="nav-logo"></div><!--]--><!--]--><!--]--><!--]--><!----><!--[-->CodeSpaceX<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/codespacex/docs/inspirations/git" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>📝 Inspirations</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>🔥 EHR</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><!----><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link active" href="/codespacex/docs/ehr/server/architecture" data-v-43f1e123><!--[-->🕌 Architecture<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link active" href="/codespacex/docs/ehr/fhir/01-fhir-resources" data-v-43f1e123><!--[-->🌋 FHIR<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link active" href="/codespacex/docs/ehr/fhir/03-fhir-omop" data-v-43f1e123><!--[-->🤖 OMOP<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link active" href="/codespacex/docs/ehr/soda/soda_guidelines" data-v-43f1e123><!--[-->🤔 SODA<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>🦾 DevOps</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/codespacex/docs/devops/azure/azure104/topic_1" data-v-43f1e123><!--[-->Azure<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/codespacex/docs/devops/elastic-search/00-index" data-v-43f1e123><!--[-->Elastic Search<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/codespacex/docs/devops/docker/index" data-v-43f1e123><!--[-->Docker<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/codespacex/docs/devops/kubernetes/index" data-v-43f1e123><!--[-->Kubernetes<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>Copper3d</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/codespacex/docs/copper3d/issues" data-v-43f1e123><!--[-->Issues<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/codespacex/docs/code-tools/nav" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>🔧 Coding tools</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a0fd61f4 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Copper3D-brids/codespacex" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Copper3D-brids/codespacex" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible has-active" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>EHR</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/roadmap" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>📚 Roadmap</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/server/architecture" data-v-e31bd47b><!--[--><h3 class="text" data-v-e31bd47b>🌱 Architecture</h3><!--]--></a><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/server/mvp" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>MVP</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 has-active" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>FHIR</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/01-fhir-resources" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>FHIR Resources for EHR (MRI)</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 is-link has-active" data-v-e31bd47b data-v-e31bd47b><div class="item" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/hapi-fhir" data-v-e31bd47b><!--[--><h4 class="text" data-v-e31bd47b>Hapi FHIR</h4><!--]--></a><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/00-synthea" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-00 Synthea data</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/01-initial-data" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-01 Initial dataset</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/02-patient-resource" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-02 Patient resource</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/03-observation-resource" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-03 Observation resource</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/04-practitioner-schedule-resource" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-04 Practitioner & Schedule resource</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/05-appointment-resource" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-05 Appointment resource</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/06-encounter-resource" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-06 Encounter resource</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/07-imagingstudy-resource" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-07 ImagingStudy resource</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/08-imagingstudy-ehr" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>T-08 ImagingStudy Duke EHR</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/fhir-ig/01-fhir-ig" data-v-e31bd47b><!--[--><h4 class="text" data-v-e31bd47b>Hapi Implementation Guide</h4><!--]--></a><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/fhir-ig/01-fhir-ig" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>FHIR Implementation Guide & Package</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/fhir-ig/02-fhir-mcode" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>mCODE Implementation Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/fhir-ig/03-fhir-profiling" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>FHIR Profiling Training</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/03-fhir-omop" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>OMOP on FHIR</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/fhir/04-fhir-redcap" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>REDCap on FHIR</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/soda/soda_guidelines" data-v-e31bd47b><!--[--><h3 class="text" data-v-e31bd47b>SODA</h3><!--]--></a><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/codespacex/docs/ehr/soda/soda_guidelines" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Guidelines</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _codespacex_docs_ehr_fhir_hapi_fhir_tutorials_08-imagingstudy-ehr" data-v-6b87e69f><div><h1 id="tutorial-fhir-imagingstudy-with-ehr-data-duke-university-data" tabindex="-1">Tutorial - FHIR ImagingStudy with EHR data (Duke University data) <a class="header-anchor" href="#tutorial-fhir-imagingstudy-with-ehr-data-duke-university-data" aria-label="Permalink to &quot;Tutorial - FHIR ImagingStudy with EHR data (Duke University data)&quot;">​</a></h1><ul><li><p>Tutorial code on GitHub <a href="https://github.com/Copper3D-brids/hapi-py-fhir-tutorials/blob/main/dukeunidata.py" target="_blank" rel="noreferrer">hapi-py-fhir-tutorials -- dukeunidata.py</a>.</p></li><li><p>Currently, it is a <strong>private</strong> repository, will open source later...</p></li></ul><h2 id="background" tabindex="-1">Background <a class="header-anchor" href="#background" aria-label="Permalink to &quot;Background&quot;">​</a></h2><h3 id="scenario" tabindex="-1">Scenario <a class="header-anchor" href="#scenario" aria-label="Permalink to &quot;Scenario&quot;">​</a></h3><p>Last time we mentioned the volunteer Linman took the breast MRIs at the Akron Hospital.The researcher at BioResearch Institute stored the collected MRI data in SPARC SDS datasets. And also he record some interest data in the below form that he would use to do further research. And our aim is to store these EHR data into FHIR resource.</p><table><thead><tr><th style="text-align:center;">Tumor Characteristics</th><th style="text-align:center;"></th><th style="text-align:center;"></th><th style="text-align:center;"></th><th style="text-align:center;">Mammography Characteristics</th><th style="text-align:center;"></th><th style="text-align:center;"></th><th style="text-align:center;">US features</th></tr></thead><tbody><tr><td style="text-align:center;">Staging(Tumor Size)# [T]</td><td style="text-align:center;">Histologic type</td><td style="text-align:center;">Tumor Location</td><td style="text-align:center;">Position</td><td style="text-align:center;">Age at mammo (days)</td><td style="text-align:center;">Breast Density</td><td style="text-align:center;">Tumor Size (cm)</td><td style="text-align:center;">Tumor Size (cm)</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">1</td><td style="text-align:center;">L</td><td style="text-align:center;">L9</td><td style="text-align:center;">NC</td><td style="text-align:center;">NC</td><td style="text-align:center;">5</td><td style="text-align:center;">3</td></tr></tbody></table><p>This table records the observation data from the Mammography and Ultra Sound images. So when we create FHIR resources for these EHR data we need to think about which MVP resources that we need.</p><p>Obviously, we need Patient resource to record the basic information of patient Linman. Then we also need two ImagingStudy resources for storing Mammography and Ultra Sound Dicom images. Finally, in terms of tumour size, location, position .etc data, we can store them into different Observation resources. And their reference relationship as shown in below graph:</p><p><img src="/codespacex/fhir/01-fhir-resources/07-imagingstudy-ehr.png" alt="sparc imagingstudy dev"></p><p>At this tutorial, we only show how to create Patient, Ultra sound ImagingStudy and tumour size Observation resource. As for others, you can follow by the same logic to create them in your database.</p><h2 id="setup-environment" tabindex="-1">Setup environment <a class="header-anchor" href="#setup-environment" aria-label="Permalink to &quot;Setup environment&quot;">​</a></h2><ul><li>Same to Tutorial 02</li></ul><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><h3 id="import-library" tabindex="-1">Import library <a class="header-anchor" href="#import-library" aria-label="Permalink to &quot;Import library&quot;">​</a></h3><p>At the beginning we need to import libraries <code>fhirpy</code> and <code>os</code>.</p><p>Also, we re-use the customise function <code>pprint</code> from Tutorial-02. We&#39;ll use it to display some Observation resource data structures.</p><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> os</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> fhirpy </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> AsyncFHIRClient</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pathlib </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Path</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> pydicom</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> datetime </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> datetime</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> uuid</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> os</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> fhirpy </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> AsyncFHIRClient</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pathlib </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Path</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> pydicom</span></span>
<span class="line"><span style="color:#D73A49;">from</span><span style="color:#24292E;"> datetime </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> datetime</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> uuid</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="create-an-instance-of-connection" tabindex="-1">Create an instance of connection <a class="header-anchor" href="#create-an-instance-of-connection" aria-label="Permalink to &quot;Create an instance of connection&quot;">​</a></h3><p>To load data from FHIR server we should instaniate <code>FHIRClient</code> class from <code>fhirpy AsyncFHIRClient</code> method.</p><p>Let&#39;s pass <code>url</code> and <code>authorization</code> arguments from environment.</p><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">client </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> AsyncFHIRClient(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">url</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;http://localhost:8080/fhir/&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#FFAB70;">authorization</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;Bearer TOKEN&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">client </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> AsyncFHIRClient(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">url</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;http://localhost:8080/fhir/&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#E36209;">authorization</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;Bearer TOKEN&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Now, we are able to operate with FHIR resources using <code>client</code>.</p><h2 id="get-patient-linman-from-fhir-database" tabindex="-1">Get patient &#39;Linman&#39; from FHIR database <a class="header-anchor" href="#get-patient-linman-from-fhir-database" aria-label="Permalink to &quot;Get patient &#39;Linman&#39; from FHIR database&quot;">​</a></h2><p>In the perviours tutorial we&#39;ve already created patient Linman in the FHIR database. so we can get Linman by her name.</p><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"> patientsResourceSearchSet </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.resources(</span><span style="color:#9ECBFF;">&quot;Patient&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    Linman </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> patientsResourceSearchSet.search(</span><span style="color:#FFAB70;">name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&#39;Linman&#39;</span><span style="color:#E1E4E8;">]).first()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"> patientsResourceSearchSet </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.resources(</span><span style="color:#032F62;">&quot;Patient&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    Linman </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> patientsResourceSearchSet.search(</span><span style="color:#E36209;">name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&#39;Linman&#39;</span><span style="color:#24292E;">]).first()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>As a result, the dictionary stucture should looks like below:</p><h2 id="generate-imagingstudy-resource-for-ultra-sound-dicom-images" tabindex="-1">Generate ImagingStudy Resource for Ultra sound Dicom images <a class="header-anchor" href="#generate-imagingstudy-resource-for-ultra-sound-dicom-images" aria-label="Permalink to &quot;Generate ImagingStudy Resource for Ultra sound Dicom images&quot;">​</a></h2><p>The Dicom image metadata header tags you may interested in below tags. As for the information tags you can read <a href="https://dicom.nema.org/medical/dicom/current/output/html/part06.html" target="_blank" rel="noreferrer">DICOM Part 6 Data Dictionary</a>.</p><ul><li><code>(0010, 0010) Patient&#39;s Name</code></li><li><code>(0010, 0020) Patient ID</code></li><li><code>(0010, 0030) Patient&#39;s Birth Date</code></li><li><code>(0010, 0040) Patient&#39;s Sex</code></li><li><code>(0010, 1010) Patient&#39;s Age</code></li></ul><p>As for create the ImagingResource, we also need to know which part of body does Linman take the UltraSound. As mentioned in senario, she took the UltraSound for her left breast. So we need to found the left breast code in <a href="http://snomed.info/sct" target="_blank" rel="noreferrer">SNOMED system</a>:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;73056007&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;73056007&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Then, we can create the ImagingStudy resource for UltraSound Dicom image now</p><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">USImageStudyPath </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;your dicom images&#39; folder path&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">patient </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Linman</span></span>
<span class="line"><span style="color:#E1E4E8;">code </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;US&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">display </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Ultrasound&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">bodySite </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;http://snomed.info/sct&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;73056007&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;display&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Breast&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">samples </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> USImageStudyPath.iterdir() </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> item.is_dir())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">first_sample_path </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">next</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">iter</span><span style="color:#E1E4E8;">(USImageStudyPath.glob(</span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">)))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">dicom_file </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pydicom.dcmread(</span><span style="color:#79B8FF;">next</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">iter</span><span style="color:#E1E4E8;">(first_sample_path.glob(</span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">)), </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">study_uid </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0020</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">000d</span><span style="color:#E1E4E8;">)].value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    dicom_study_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0008</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0030</span><span style="color:#E1E4E8;">)].value</span></span>
<span class="line"><span style="color:#E1E4E8;">    started_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.strptime(dicom_study_time, </span><span style="color:#9ECBFF;">&quot;%H%M%S.</span><span style="color:#79B8FF;">%f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">).strftime(</span><span style="color:#9ECBFF;">&quot;%Y-%m-</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">T%H:%M:%S&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    started_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now().strftime(</span><span style="color:#9ECBFF;">&#39;%Y-%m-</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">T%H:%M:%S&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    numberOfSeries </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0020</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">1206</span><span style="color:#E1E4E8;">)].value)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    numberOfSeries </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> USImageStudyPath.iterdir() </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> item.is_dir())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    numberOfInstances </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0020</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">1208</span><span style="color:#E1E4E8;">)].value)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    numberOfInstances </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> sample </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> USImageStudyPath.iterdir():</span></span>
<span class="line"><span style="color:#E1E4E8;">        numberOfInstances </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> sample.iterdir() </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> item.is_file())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> patient </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    series </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> sample </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> USImageStudyPath.iterdir():</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> sample.is_file():</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#E1E4E8;">        instances </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">        first_file </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">next</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">iter</span><span style="color:#E1E4E8;">(sample.glob(</span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">)), </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        sample_dicom_file </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pydicom.dcmread(first_file)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            numberOfSeriesInstances </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(sample_dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0020</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">1209</span><span style="color:#E1E4E8;">)].value)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            numberOfSeriesInstances </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> sample.iterdir() </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> item.is_file())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> sample.iterdir():</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> item.is_dir():</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#E1E4E8;">            instance_dicom_file </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pydicom.dcmread(item)</span></span>
<span class="line"><span style="color:#E1E4E8;">            dicom_instance </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;uid&quot;</span><span style="color:#E1E4E8;">: instance_dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0008</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0018</span><span style="color:#E1E4E8;">)].value,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;number&quot;</span><span style="color:#E1E4E8;">: instance_dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0020</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0013</span><span style="color:#E1E4E8;">)].value,</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">            instances.append(dicom_instance)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        series.append({</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;uid&quot;</span><span style="color:#E1E4E8;">: sample_dicom_file[(</span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">0020</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">000e</span><span style="color:#E1E4E8;">)].value,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;modality&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;http://dicom.nema.org/resources/ontology/DCM&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: code,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;display&quot;</span><span style="color:#E1E4E8;">: display</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;bodySite&quot;</span><span style="color:#E1E4E8;">: bodySite,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;numberOfInstances&quot;</span><span style="color:#E1E4E8;">: numberOfSeriesInstances,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;instance&quot;</span><span style="color:#E1E4E8;">: instances</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    imagingResource </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.resource(</span><span style="color:#9ECBFF;">&#39;ImagingStudy&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        </span><span style="color:#FFAB70;">identifier</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[{</span></span>
<span class="line"><span style="color:#E1E4E8;">                                            </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;urn:dicom:uid&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                            </span><span style="color:#9ECBFF;">&quot;value&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;urn:oid:</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">study_uid</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        },</span></span>
<span class="line"><span style="color:#E1E4E8;">                                            {</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                </span><span style="color:#9ECBFF;">&quot;use&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;temp&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;urn:sparc_study:uid&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                </span><span style="color:#9ECBFF;">&quot;value&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;urn:uid:</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">USImageStudyPath.name </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;-&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> study_uid</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">                                            },</span></span>
<span class="line"><span style="color:#E1E4E8;">                                            {</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                </span><span style="color:#9ECBFF;">&quot;use&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;temp&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;urn:sparc_dataset:uid&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                </span><span style="color:#9ECBFF;">&quot;value&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;urn:uid:</span><span style="color:#79B8FF;">{str</span><span style="color:#E1E4E8;">(USImageStudyPath.parent.parent.name) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;-&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(uuid.uuid4())</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">                                            },</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        ],</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        </span><span style="color:#FFAB70;">status</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;available&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        </span><span style="color:#FFAB70;">subject</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">patient.to_reference(),</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        </span><span style="color:#FFAB70;">started</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">started_time,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        </span><span style="color:#FFAB70;">numberOfSeries</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">numberOfSeries,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        </span><span style="color:#FFAB70;">numberOfInstances</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">numberOfInstances,</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        </span><span style="color:#FFAB70;">series</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">series</span></span>
<span class="line"><span style="color:#E1E4E8;">                                        )</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> imagingResource.save()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">USImageStudyPath </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;your dicom images&#39; folder path&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">patient </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Linman</span></span>
<span class="line"><span style="color:#24292E;">code </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;US&#39;</span></span>
<span class="line"><span style="color:#24292E;">display </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Ultrasound&#39;</span></span>
<span class="line"><span style="color:#24292E;">bodySite </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;http://snomed.info/sct&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;73056007&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;display&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Breast&quot;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">samples </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sum</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> item </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> USImageStudyPath.iterdir() </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> item.is_dir())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">first_sample_path </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">next</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">iter</span><span style="color:#24292E;">(USImageStudyPath.glob(</span><span style="color:#032F62;">&#39;*&#39;</span><span style="color:#24292E;">)))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">dicom_file </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pydicom.dcmread(</span><span style="color:#005CC5;">next</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">iter</span><span style="color:#24292E;">(first_sample_path.glob(</span><span style="color:#032F62;">&#39;*&#39;</span><span style="color:#24292E;">)), </span><span style="color:#005CC5;">None</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">study_uid </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0020</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">000d</span><span style="color:#24292E;">)].value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    dicom_study_time </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0008</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0030</span><span style="color:#24292E;">)].value</span></span>
<span class="line"><span style="color:#24292E;">    started_time </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> datetime.strptime(dicom_study_time, </span><span style="color:#032F62;">&quot;%H%M%S.</span><span style="color:#005CC5;">%f</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">).strftime(</span><span style="color:#032F62;">&quot;%Y-%m-</span><span style="color:#005CC5;">%d</span><span style="color:#032F62;">T%H:%M:%S&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">except</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    started_time </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> datetime.now().strftime(</span><span style="color:#032F62;">&#39;%Y-%m-</span><span style="color:#005CC5;">%d</span><span style="color:#032F62;">T%H:%M:%S&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    numberOfSeries </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">int</span><span style="color:#24292E;">(dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0020</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">1206</span><span style="color:#24292E;">)].value)</span></span>
<span class="line"><span style="color:#D73A49;">except</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    numberOfSeries </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sum</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> item </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> USImageStudyPath.iterdir() </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> item.is_dir())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">try</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    numberOfInstances </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">int</span><span style="color:#24292E;">(dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0020</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">1208</span><span style="color:#24292E;">)].value)</span></span>
<span class="line"><span style="color:#D73A49;">except</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    numberOfInstances </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> sample </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> USImageStudyPath.iterdir():</span></span>
<span class="line"><span style="color:#24292E;">        numberOfInstances </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sum</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> item </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> sample.iterdir() </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> item.is_file())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> patient </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">not</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">None</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    series </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> []</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> sample </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> USImageStudyPath.iterdir():</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> sample.is_file():</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">break</span></span>
<span class="line"><span style="color:#24292E;">        instances </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> []</span></span>
<span class="line"><span style="color:#24292E;">        first_file </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">next</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">iter</span><span style="color:#24292E;">(sample.glob(</span><span style="color:#032F62;">&#39;*&#39;</span><span style="color:#24292E;">)), </span><span style="color:#005CC5;">None</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        sample_dicom_file </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pydicom.dcmread(first_file)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">try</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            numberOfSeriesInstances </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">int</span><span style="color:#24292E;">(sample_dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0020</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">1209</span><span style="color:#24292E;">)].value)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">except</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            numberOfSeriesInstances </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sum</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> item </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> sample.iterdir() </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> item.is_file())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> item </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> sample.iterdir():</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> item.is_dir():</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#D73A49;">break</span></span>
<span class="line"><span style="color:#24292E;">            instance_dicom_file </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> pydicom.dcmread(item)</span></span>
<span class="line"><span style="color:#24292E;">            dicom_instance </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;uid&quot;</span><span style="color:#24292E;">: instance_dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0008</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0018</span><span style="color:#24292E;">)].value,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;number&quot;</span><span style="color:#24292E;">: instance_dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0020</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0013</span><span style="color:#24292E;">)].value,</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">            instances.append(dicom_instance)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        series.append({</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;uid&quot;</span><span style="color:#24292E;">: sample_dicom_file[(</span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">0020</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">000e</span><span style="color:#24292E;">)].value,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;modality&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;http://dicom.nema.org/resources/ontology/DCM&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">: code,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;display&quot;</span><span style="color:#24292E;">: display</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;bodySite&quot;</span><span style="color:#24292E;">: bodySite,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;numberOfInstances&quot;</span><span style="color:#24292E;">: numberOfSeriesInstances,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;instance&quot;</span><span style="color:#24292E;">: instances</span></span>
<span class="line"><span style="color:#24292E;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    imagingResource </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.resource(</span><span style="color:#032F62;">&#39;ImagingStudy&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                                        </span><span style="color:#E36209;">identifier</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">[{</span></span>
<span class="line"><span style="color:#24292E;">                                            </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;urn:dicom:uid&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                                            </span><span style="color:#032F62;">&quot;value&quot;</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;urn:oid:</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">study_uid</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span></span>
<span class="line"><span style="color:#24292E;">                                        },</span></span>
<span class="line"><span style="color:#24292E;">                                            {</span></span>
<span class="line"><span style="color:#24292E;">                                                </span><span style="color:#032F62;">&quot;use&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;temp&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                                                </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;urn:sparc_study:uid&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                                                </span><span style="color:#032F62;">&quot;value&quot;</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;urn:uid:</span><span style="color:#005CC5;">{</span><span style="color:#24292E;">USImageStudyPath.name </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;-&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> study_uid</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span></span>
<span class="line"><span style="color:#24292E;">                                            },</span></span>
<span class="line"><span style="color:#24292E;">                                            {</span></span>
<span class="line"><span style="color:#24292E;">                                                </span><span style="color:#032F62;">&quot;use&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;temp&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                                                </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;urn:sparc_dataset:uid&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                                                </span><span style="color:#032F62;">&quot;value&quot;</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">f</span><span style="color:#032F62;">&quot;urn:uid:</span><span style="color:#005CC5;">{str</span><span style="color:#24292E;">(USImageStudyPath.parent.parent.name) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;-&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">str</span><span style="color:#24292E;">(uuid.uuid4())</span><span style="color:#005CC5;">}</span><span style="color:#032F62;">&quot;</span></span>
<span class="line"><span style="color:#24292E;">                                            },</span></span>
<span class="line"><span style="color:#24292E;">                                        ],</span></span>
<span class="line"><span style="color:#24292E;">                                        </span><span style="color:#E36209;">status</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;available&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                                        </span><span style="color:#E36209;">subject</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">patient.to_reference(),</span></span>
<span class="line"><span style="color:#24292E;">                                        </span><span style="color:#E36209;">started</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">started_time,</span></span>
<span class="line"><span style="color:#24292E;">                                        </span><span style="color:#E36209;">numberOfSeries</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">numberOfSeries,</span></span>
<span class="line"><span style="color:#24292E;">                                        </span><span style="color:#E36209;">numberOfInstances</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">numberOfInstances,</span></span>
<span class="line"><span style="color:#24292E;">                                        </span><span style="color:#E36209;">series</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">series</span></span>
<span class="line"><span style="color:#24292E;">                                        )</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> imagingResource.save()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><p>When we create the ImagingStudy resource, we also need to set the patient Linman reference to this UltraSound ImagingStudy resource.</p><h2 id="create-observation-resources" tabindex="-1">Create Observation Resources <a class="header-anchor" href="#create-observation-resources" aria-label="Permalink to &quot;Create Observation Resources&quot;">​</a></h2><p>The <a href="http://hl7.org/fhir/R4/observation.html" target="_blank" rel="noreferrer">Observation</a> resource records the observation result from the UltraSound images. At this stage, from the table above we can see there is a tumour size result from UltraSound images.</p><p>Let&#39;s create the tumour size Observation resource for UltraSound ImagingStudy resource.</p><p>Remember, when we create the Observation resource, we need to find out the tumour size code under the <a href="http://loinc.org" target="_blank" rel="noreferrer">loinc.org</a>.</p><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">linman </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> getPatient(client)</span></span>
<span class="line"><span style="color:#E1E4E8;">imagingStudyResourceSearchSet </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.resources(</span><span style="color:#9ECBFF;">&#39;ImagingStudy&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">imagingStudys </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> imagingStudyResourceSearchSet.search(</span><span style="color:#FFAB70;">patient</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">linman.to_reference(), </span><span style="color:#FFAB70;">modality</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;US&quot;</span><span style="color:#E1E4E8;">).fetch_all()</span></span>
<span class="line"><span style="color:#E1E4E8;">us_imagingstudy </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> imagingStudys[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">us_observation </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.resource(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;Observation&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">status</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;preliminary&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">subject</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">linman.to_reference(),</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">focus</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">us_imagingstudy.to_reference(),</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">category</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;coding&#39;</span><span style="color:#E1E4E8;">: [{</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;system&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;http://terminology.hl7.org/CodeSystem/observation-category&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;laboratory&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">code</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&#39;coding&#39;</span><span style="color:#E1E4E8;">: [{</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;system&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;http://loinc.org&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;21889-1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;display&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Size Tumor&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">effectiveDateTime</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;2018-04-01T00:00:00Z&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">component</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;coding&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">                    {</span></span>
<span class="line"><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;http://loinc.org&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;33728-7&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">                    }</span></span>
<span class="line"><span style="color:#E1E4E8;">                ]</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&quot;valueQuantity&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;value&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2.5</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;unit&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;centimeters&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;http://unitsofmeasure.org&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;cm&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> us_observation.save()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">linman </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> getPatient(client)</span></span>
<span class="line"><span style="color:#24292E;">imagingStudyResourceSearchSet </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.resources(</span><span style="color:#032F62;">&#39;ImagingStudy&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">imagingStudys </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> imagingStudyResourceSearchSet.search(</span><span style="color:#E36209;">patient</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">linman.to_reference(), </span><span style="color:#E36209;">modality</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;US&quot;</span><span style="color:#24292E;">).fetch_all()</span></span>
<span class="line"><span style="color:#24292E;">us_imagingstudy </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> imagingStudys[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">us_observation </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.resource(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;Observation&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">status</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;preliminary&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">subject</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">linman.to_reference(),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">focus</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">us_imagingstudy.to_reference(),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">category</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">[{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;coding&#39;</span><span style="color:#24292E;">: [{</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&#39;system&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;http://terminology.hl7.org/CodeSystem/observation-category&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;laboratory&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }]</span></span>
<span class="line"><span style="color:#24292E;">    }],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">code</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&#39;coding&#39;</span><span style="color:#24292E;">: [{</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&#39;system&#39;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;http://loinc.org&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;21889-1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;display&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Size Tumor&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">effectiveDateTime</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;2018-04-01T00:00:00Z&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">component</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">[</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;coding&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">                    {</span></span>
<span class="line"><span style="color:#24292E;">                        </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;http://loinc.org&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                        </span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;33728-7&quot;</span></span>
<span class="line"><span style="color:#24292E;">                    }</span></span>
<span class="line"><span style="color:#24292E;">                ]</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">&quot;valueQuantity&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;value&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2.5</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;unit&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;centimeters&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;system&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;http://unitsofmeasure.org&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;cm&quot;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">await</span><span style="color:#24292E;"> us_observation.save()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>After we create the Observation resource for tumour size, we should take the patient Linman and her UltraSound ImagingStudy resources as references into <code>subject</code> and <code>focus</code> fields, respectively.</p><h2 id="search-imagingstudy-resource" tabindex="-1">Search ImagingStudy Resource <a class="header-anchor" href="#search-imagingstudy-resource" aria-label="Permalink to &quot;Search ImagingStudy Resource&quot;">​</a></h2><p>Please view <a href="http://hl7.org/fhir/R4/imagingstudy.html#search" target="_blank" rel="noreferrer">ImagingStudy Search Parameters</a> and <a href="http://hl7.org/fhir/R4/observation.html#search" target="_blank" rel="noreferrer">Observation Search Parameters</a> to find out the parameters for search in you senario.</p><ul><li>Let&#39;s try search all studies/ImagingStudy Resources of a patient/volunteer <code>linman</code> accross all SPARC Datasets. (Find all ImagingStudy Resources related to <code>linman</code>)</li></ul><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">linman </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> getPatient(client)</span></span>
<span class="line"><span style="color:#E1E4E8;">imagingStudyResourceSearchSet </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> client.resources(</span><span style="color:#9ECBFF;">&#39;ImagingStudy&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;"># get all imagingStudy of patient linman</span></span>
<span class="line"><span style="color:#E1E4E8;">imagingStudys </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> imagingStudyResourceSearchSet.search(</span><span style="color:#FFAB70;">patient</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">linman.to_reference()).fetch_all()</span></span>
<span class="line"><span style="color:#E1E4E8;">get </span><span style="color:#79B8FF;">all</span><span style="color:#E1E4E8;"> ultrasound imageStudy of patient linman</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">linman </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> getPatient(client)</span></span>
<span class="line"><span style="color:#24292E;">imagingStudyResourceSearchSet </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> client.resources(</span><span style="color:#032F62;">&#39;ImagingStudy&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6A737D;"># get all imagingStudy of patient linman</span></span>
<span class="line"><span style="color:#24292E;">imagingStudys </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> imagingStudyResourceSearchSet.search(</span><span style="color:#E36209;">patient</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">linman.to_reference()).fetch_all()</span></span>
<span class="line"><span style="color:#24292E;">get </span><span style="color:#005CC5;">all</span><span style="color:#24292E;"> ultrasound imageStudy of patient linman</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Let&#39;s try search the tumour size observation from the UltraSound image</li></ul><div class="language-py vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">imagingStudys </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> imagingStudyResourceSearchSet.search(</span><span style="color:#FFAB70;">patient</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">linman.to_reference(), </span><span style="color:#FFAB70;">modality</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;US&quot;</span><span style="color:#E1E4E8;">).fetch_all()</span></span>
<span class="line"><span style="color:#6A737D;"># get the linman&#39;s ultrasound observation resource</span></span>
<span class="line"><span style="color:#E1E4E8;">observation </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> client.resources(</span><span style="color:#9ECBFF;">&quot;Observation&quot;</span><span style="color:#E1E4E8;">).search(</span><span style="color:#FFAB70;">patient</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">linman.to_reference(),</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                            </span><span style="color:#FFAB70;">focus</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">imagingStudys[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">].to_reference()).fetch_all()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(observation)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">imagingStudys </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> imagingStudyResourceSearchSet.search(</span><span style="color:#E36209;">patient</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">linman.to_reference(), </span><span style="color:#E36209;">modality</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;US&quot;</span><span style="color:#24292E;">).fetch_all()</span></span>
<span class="line"><span style="color:#6A737D;"># get the linman&#39;s ultrasound observation resource</span></span>
<span class="line"><span style="color:#24292E;">observation </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> client.resources(</span><span style="color:#032F62;">&quot;Observation&quot;</span><span style="color:#24292E;">).search(</span><span style="color:#E36209;">patient</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">linman.to_reference(),</span></span>
<span class="line"><span style="color:#24292E;">                                                            </span><span style="color:#E36209;">focus</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">imagingStudys[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">].to_reference()).fetch_all()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">print</span><span style="color:#24292E;">(observation)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">​</a></h2><p>In this tutorial the following topics were covered:</p><ul><li><code>Patient</code>, <code>ImagingStudy</code> and <code>Observation</code> resources.</li><li>How to use <code>pydicom</code> to get dicom file tags information.</li><li>How to search <code>ImagingStudy Resource</code> for specific identifier and speciality.</li><li>Search specific observation resource via ImagingStudy.</li></ul></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><div class="edit-info" data-v-ef5dee53><div class="edit-link" data-v-ef5dee53><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Copper3D-brids/codespacex/blob/main/src/docs/ehr/fhir/hapi_fhir/tutorials/08-imagingstudy-ehr.md" target="_blank" rel="noreferrer" data-v-ef5dee53><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-ef5dee53><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-ef5dee53><p class="VPLastUpdated" data-v-ef5dee53 data-v-7e05ebdb>Last update time: <time datetime="2023-12-14T04:03:38.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" data-v-ef5dee53><div class="pager" data-v-ef5dee53><a class="pager-link prev" href="/codespacex/docs/ehr/fhir/hapi_fhir/tutorials/07-imagingstudy-resource" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Prev</span><span class="title" data-v-ef5dee53>T-07 ImagingStudy resource</span></a></div><div class="pager" data-v-ef5dee53><a class="pager-link next" href="/codespacex/docs/ehr/fhir/fhir-ig/01-fhir-ig" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Next</span><span class="title" data-v-ef5dee53>Hapi Implementation Guide</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5a346dfe data-v-e03eb2e1><div class="container" data-v-e03eb2e1><p class="message" data-v-e03eb2e1>CodeSpaceX Blog, Welcome <a target="_blank" style="color: var(--vp-c-brand)" href="https://github.com/Copper3D-brids/codespacex">star ⭐</a> let's get more people to discover!</p><p class="copyright" data-v-e03eb2e1><a target="_blank" href="https://github.com/Copper3D-brids/codespacex/blob/main/LICENSE">Apache-2.0 License CodeSpaceX </a> | COPYRIGHT © 2023-2024</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"docs_copper3d_issues.md\":\"bd803ac8\",\"docs_devops_elastic-search_03-project.md\":\"782441a1\",\"docs_ehr_fhir_04-fhir-redcap.md\":\"65ea77df\",\"docs_devops_azure_azure104_topic_2.md\":\"e0838a5f\",\"docs_ehr_fhir_fhir-ig_01-fhir-ig.md\":\"6baef3bd\",\"docs_ehr_fhir_hapi_fhir_tutorials_01-initial-data.md\":\"c1584958\",\"docs_ehr_fhir_hapi_fhir_tutorials_00-synthea.md\":\"678e97ca\",\"index.md\":\"dd8d417b\",\"docs_ehr_index.md\":\"97660b26\",\"docs_code-tools_nav.md\":\"271a7c26\",\"docs_ehr_fhir_hapi_fhir_tutorials_05-appointment-resource.md\":\"94999e91\",\"docs_devops_azure_template.md\":\"68e218ff\",\"docs_ehr_fhir_fhir-ig_02-fhir-mcode.md\":\"29304891\",\"docs_devops_elastic-search_00-index.md\":\"ec1a2fca\",\"docs_ehr_fhir_hapi_fhir_hapi-fhir.md\":\"c7909f42\",\"docs_ehr_fhir_hapi_fhir_tutorials_02-patient-resource.md\":\"f6714eff\",\"docs_ehr_fhir_fhir-ig_03-fhir-profiling.md\":\"5ebdc704\",\"docs_ehr_fhir_hapi_fhir_tutorials_06-encounter-resource.md\":\"3f8ec77b\",\"docs_devops_kubernetes_index.md\":\"924f593b\",\"docs_inspirations_python.md\":\"9f522d59\",\"docs_ehr_fhir_01-fhir-resources.md\":\"2e775c7e\",\"docs_ehr_roadmap.md\":\"94f38430\",\"docs_devops_elastic-search_01-es-install.md\":\"1cd3033b\",\"docs_devops_elastic-search_02-knowledge.md\":\"0f08d6c7\",\"docs_ehr_fhir_03-fhir-omop.md\":\"58dbede4\",\"docs_devops_azure_azure104_topic_1.md\":\"c0d58907\",\"docs_ehr_fhir_hapi_fhir_tutorials_03-observation-resource.md\":\"f68dc617\",\"docs_inspirations_git.md\":\"02bb5ecf\",\"docs_ehr_fhir_hapi_fhir_tutorials_04-practitioner-schedule-resource.md\":\"5058690f\",\"docs_ehr_soda_soda_guidelines.md\":\"a8fdfd22\",\"docs_ehr_server_mvp.md\":\"4d4f8b9f\",\"docs_ehr_fhir_hapi_fhir_tutorials_07-imagingstudy-resource.md\":\"6912969e\",\"docs_ehr_fhir_hapi_fhir_tutorials_08-imagingstudy-ehr.md\":\"e9f09927\",\"docs_ehr_server_architecture.md\":\"4a508912\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"CodeSpaceX\",\"description\":\"A knowledge base for EHR & CI/CD\",\"base\":\"/codespacex/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"docFooter\":{\"prev\":\"Prev\",\"next\":\"Next\"},\"lastUpdatedText\":\"Last update time\",\"editLink\":{\"pattern\":\"https://github.com/Copper3D-brids/codespacex/blob/main/src/:path\",\"text\":\"Edit this page on GitHub\"},\"footer\":{\"message\":\"CodeSpaceX Blog, Welcome <a target=\\\"_blank\\\" style=\\\"color: var(--vp-c-brand)\\\" href=\\\"https://github.com/Copper3D-brids/codespacex\\\">star ⭐</a> let's get more people to discover!\",\"copyright\":\"<a target=\\\"_blank\\\" href=\\\"https://github.com/Copper3D-brids/codespacex/blob/main/LICENSE\\\">Apache-2.0 License CodeSpaceX </a> | COPYRIGHT © 2023-2024\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Copper3D-brids/codespacex\"}],\"algolia\":{\"apiKey\":\"45b6bb84224e68593eeda867627c0925\",\"indexName\":\"codespacex\",\"appId\":\"P808QIPILT\",\"placeholder\":\"Keywords for search docs\",\"translations\":{\"button\":{\"buttonText\":\"Search\"}}},\"nav\":[{\"text\":\"📝 Inspirations\",\"link\":\"/docs/inspirations/git\",\"activeMatch\":\"/docs/inspirations/\"},{\"text\":\"🔥 EHR\",\"items\":[{\"items\":[{\"text\":\"🕌 Architecture\",\"link\":\"/docs/ehr/server/architecture\",\"activeMatch\":\"/docs/ehr\"}]},{\"text\":\"🌋 FHIR\",\"link\":\"/docs/ehr/fhir/01-fhir-resources\",\"activeMatch\":\"/docs/ehr\"},{\"text\":\"🤖 OMOP\",\"link\":\"/docs/ehr/fhir/03-fhir-omop\",\"activeMatch\":\"/docs/ehr\"},{\"text\":\"🤔 SODA\",\"link\":\"/docs/ehr/soda/soda_guidelines\",\"activeMatch\":\"/docs/ehr\"}]},{\"text\":\"🦾 DevOps\",\"items\":[{\"text\":\"Azure\",\"link\":\"/docs/devops/azure/azure104/topic_1\",\"activeMatch\":\"/docs/devops\"},{\"text\":\"Elastic Search\",\"link\":\"/docs/devops/elastic-search/00-index\",\"activeMatch\":\"/docs/devops\"},{\"text\":\"Docker\",\"link\":\"/docs/devops/docker/index\",\"activeMatch\":\"/docs/devops\"},{\"text\":\"Kubernetes\",\"link\":\"/docs/devops/kubernetes/index\",\"activeMatch\":\"/docs/devops\"}]},{\"text\":\"Copper3d\",\"items\":[{\"text\":\"Issues\",\"link\":\"/docs/copper3d/issues\",\"activeMatch\":\"/docs/copper3d\"}]},{\"text\":\"🔧 Coding tools\",\"link\":\"/docs/code-tools/nav\",\"activeMatch\":\"/docs/code-tools/\"}],\"sidebar\":{\"/docs/inspirations\":[{\"text\":\"\",\"collapsed\":false,\"items\":[{\"text\":\"Python\",\"link\":\"/docs/inspirations/python\"},{\"text\":\"Git\",\"link\":\"/docs/inspirations/git\"},{\"text\":\"Javascript\",\"link\":\"/docs/interview/javascript\"},{\"text\":\"TypeScript\",\"link\":\"/docs/interview/typescript\"}]}],\"/docs/ehr\":[{\"text\":\"EHR\",\"collapsed\":false,\"items\":[{\"text\":\"📚 Roadmap\",\"link\":\"/docs/ehr/roadmap\"},{\"text\":\"🌱 Architecture\",\"items\":[{\"text\":\"MVP\",\"link\":\"/docs/ehr/server/mvp\"}],\"link\":\"/docs/ehr/server/architecture\"},{\"text\":\"FHIR\",\"items\":[{\"text\":\"FHIR Resources for EHR (MRI)\",\"link\":\"/docs/ehr/fhir/01-fhir-resources\"},{\"text\":\"Hapi FHIR\",\"link\":\"/docs/ehr/fhir/hapi_fhir/hapi-fhir\",\"items\":[{\"text\":\"T-00 Synthea data\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/00-synthea\"},{\"text\":\"T-01 Initial dataset\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/01-initial-data\"},{\"text\":\"T-02 Patient resource\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/02-patient-resource\"},{\"text\":\"T-03 Observation resource\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/03-observation-resource\"},{\"text\":\"T-04 Practitioner & Schedule resource\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/04-practitioner-schedule-resource\"},{\"text\":\"T-05 Appointment resource\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/05-appointment-resource\"},{\"text\":\"T-06 Encounter resource\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/06-encounter-resource\"},{\"text\":\"T-07 ImagingStudy resource\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/07-imagingstudy-resource\"},{\"text\":\"T-08 ImagingStudy Duke EHR\",\"link\":\"/docs/ehr/fhir/hapi_fhir/tutorials/08-imagingstudy-ehr\"}]},{\"text\":\"Hapi Implementation Guide\",\"link\":\"/docs/ehr/fhir/fhir-ig/01-fhir-ig\",\"items\":[{\"text\":\"FHIR Implementation Guide & Package\",\"link\":\"/docs/ehr/fhir/fhir-ig/01-fhir-ig\"},{\"text\":\"mCODE Implementation Guide\",\"link\":\"/docs/ehr/fhir/fhir-ig/02-fhir-mcode\"},{\"text\":\"FHIR Profiling Training\",\"link\":\"/docs/ehr/fhir/fhir-ig/03-fhir-profiling\"}]},{\"text\":\"OMOP on FHIR\",\"link\":\"/docs/ehr/fhir/03-fhir-omop\"},{\"text\":\"REDCap on FHIR\",\"link\":\"/docs/ehr/fhir/04-fhir-redcap\"}]},{\"text\":\"SODA\",\"link\":\"/docs/ehr/soda/soda_guidelines\",\"items\":[{\"text\":\"Guidelines\",\"link\":\"/docs/ehr/soda/soda_guidelines\"}]}]}],\"/docs/devops/\":[{\"text\":\"Elastic Search\",\"collapsed\":false,\"items\":[{\"text\":\"Usage & Scope\",\"link\":\"/docs/devops/elastic-search/00-index\"},{\"text\":\"Install Elasticsearch\",\"link\":\"/docs/devops/elastic-search/01-es-install\"},{\"text\":\"Basic Knowledge\",\"link\":\"/docs/devops/elastic-search/02-knowledge\"},{\"text\":\"Projects\",\"link\":\"/docs/devops/elastic-search/03-project\"}]},{\"text\":\"Docker\",\"collapsed\":false,\"items\":[{\"text\":\"Usage & Scope\",\"link\":\"/docs/devops/docker/index\"}]},{\"text\":\"Kubernetes\",\"collapsed\":false,\"items\":[{\"text\":\"Usage & Scope\",\"link\":\"/docs/devops/kubernetes/index\"}]},{\"text\":\"Azure\",\"collapsed\":false,\"items\":[{\"text\":\"Azure 104\",\"items\":[{\"text\":\"Topic One\",\"link\":\"/docs/devops/azure/azure104/topic_1\"},{\"text\":\"Topic Two\",\"link\":\"/docs/devops/azure/azure104/topic_2\"}]}]}],\"/docs/copper3d/\":[{\"text\":\"Copper3d\",\"collapsed\":false,\"items\":[{\"text\":\"📚 Issues\",\"link\":\"/docs/copper3d/issues\"}]}],\"/docs/code-tools\":[{\"text\":\"Resources\",\"link\":\"/docs/code-tools/nav\"}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":true}");</script>
    
  </body>
</html>