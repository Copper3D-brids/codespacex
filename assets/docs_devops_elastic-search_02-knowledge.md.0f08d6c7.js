import{_ as s,o as a,c as e,Q as n}from"./chunks/framework.f9076d03.js";const l=JSON.parse('{"title":"Elasticsearch Knowledges","description":"","frontmatter":{},"headers":[],"relativePath":"docs/devops/elastic-search/02-knowledge.md","filePath":"docs/devops/elastic-search/02-knowledge.md","lastUpdated":1698750591000}'),p={name:"docs/devops/elastic-search/02-knowledge.md"},t=[n('<h1 id="elasticsearch-knowledges" tabindex="-1">Elasticsearch Knowledges <a class="header-anchor" href="#elasticsearch-knowledges" aria-label="Permalink to &quot;Elasticsearch Knowledges&quot;">​</a></h1><h2 id="index-in-elasticsearch" tabindex="-1">Index in Elasticsearch <a class="header-anchor" href="#index-in-elasticsearch" aria-label="Permalink to &quot;Index in Elasticsearch&quot;">​</a></h2><ul><li><code>Index</code>: A set of same types of document.</li><li><code>Mapping</code>: Field constraint information for documents in an index, similar to structural constraints for tables.</li></ul><h2 id="forward-index-and-inverted-index" tabindex="-1">Forward Index and Inverted Index <a class="header-anchor" href="#forward-index-and-inverted-index" aria-label="Permalink to &quot;Forward Index and Inverted Index&quot;">​</a></h2><p>The elasticsearch adopt <code>Inverted Index</code>:</p><ul><li><code>document</code>: each data is a document.</li><li><code>term</code>: grouping of words in a document based on semantics.</li></ul><h3 id="forward-index" tabindex="-1">Forward Index <a class="header-anchor" href="#forward-index" aria-label="Permalink to &quot;Forward Index&quot;">​</a></h3><p>Based on document id to create index. When search terms, it must find the document at first, then check the document if includes terms.</p><table><thead><tr><th>id</th><th>title</th><th>price</th></tr></thead><tbody><tr><td>1</td><td>apple watch</td><td>1999</td></tr><tr><td>2</td><td>apple care</td><td>523</td></tr><tr><td>3</td><td>huawei headphone</td><td>600</td></tr><tr><td>4</td><td>apple mac</td><td>4500</td></tr></tbody></table><h3 id="inverted-index" tabindex="-1">Inverted Index <a class="header-anchor" href="#inverted-index" aria-label="Permalink to &quot;Inverted Index&quot;">​</a></h3><p>Segment the document content and create an index of the terms and record the information (id) of the document where the terms are located. In the query first according to the term query to the document id, and then get the corresponding document.</p><table><thead><tr><th>term</th><th>document id</th></tr></thead><tbody><tr><td>apple</td><td>1, 2, 3, 6</td></tr><tr><td>watch</td><td>2,</td></tr><tr><td>care</td><td>3,</td></tr><tr><td>huawei</td><td>4, 5</td></tr><tr><td>headphone</td><td>5</td></tr><tr><td>mac</td><td>6</td></tr></tbody></table><h2 id="mysql-vs-elasticsearch-compare" tabindex="-1">MySql vs Elasticsearch compare <a class="header-anchor" href="#mysql-vs-elasticsearch-compare" aria-label="Permalink to &quot;MySql vs Elasticsearch compare&quot;">​</a></h2><table><thead><tr><th>MySQL</th><th>Elasticsearch</th><th>Description</th></tr></thead><tbody><tr><td>Table</td><td>Index</td><td>Index is a set of document, similar to the table in database.</td></tr><tr><td>Row</td><td>Document</td><td>Document is each data, similar to the rows in database. All documents are JSON format.</td></tr><tr><td>Column</td><td>Field</td><td>Field is fields in a json document, similar the Column in database.</td></tr><tr><td>Schema</td><td>Mapping</td><td>Mapping is the constraints of document in Index, such as field type constraints. It is similar to Schema in database.</td></tr><tr><td>SQL</td><td>DSL</td><td>DSL is a JSON-style request statement provided by elasticsearch to manipulate elasticsearch and implement CRUD.</td></tr></tbody></table><ul><li>Architecture <ul><li>MySQL: it specialises in transaction type operations that ensure data security and consistency.</li><li>Elasticsearch: it is good at searching, analysing, and calculating large amounts of data.</li></ul></li></ul><p><img src="/codespacex/devops/elasticsearch/elastic-01.png" alt="Elasticsearch"></p><h2 id="index-library-operator" tabindex="-1">Index Library Operator <a class="header-anchor" href="#index-library-operator" aria-label="Permalink to &quot;Index Library Operator&quot;">​</a></h2><h3 id="mapping-feild" tabindex="-1">Mapping feild <a class="header-anchor" href="#mapping-feild" aria-label="Permalink to &quot;Mapping feild&quot;">​</a></h3><p>mapping is a constraint on documents in an indexed library, common mapping attributes include:</p><ul><li>type: field data type <ul><li>string: text (text that can be segmented), keyword (e.g., brand, Country, ip address)</li><li>number: long, integer, short, byte, double, float</li><li>bool: boolean</li><li>date: date</li><li>object: object</li></ul></li><li>index: whether to create an index, default value: true</li><li>analyzer: use which analyzer</li><li>properties: the sub-field of current field</li></ul><h3 id="create-index-library" tabindex="-1">Create Index Library <a class="header-anchor" href="#create-index-library" aria-label="Permalink to &quot;Create Index Library&quot;">​</a></h3><p>In ES to operate the index library and document via RESTful request. Using <code>DSL</code> syntax to represent request content. The dsl syntax for creating index libraries and mapping is as follows:</p><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT /index_library_name</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;mappings&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;field name&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;type&quot;: &quot;keyword&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;analyzer&quot;: &quot;ik_smart&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">      },</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;field name2&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;type&quot;: &quot;keyword&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;index&quot;: false</span></span>\n<span class="line"><span style="color:#e1e4e8;">      },</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;field name3&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">          &quot;sub field&quot;{</span></span>\n<span class="line"><span style="color:#e1e4e8;">            &quot;type&quot;: &quot;keyword&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">          }</span></span>\n<span class="line"><span style="color:#e1e4e8;">        }</span></span>\n<span class="line"><span style="color:#e1e4e8;">      }</span></span>\n<span class="line"><span style="color:#e1e4e8;">    }</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT /index_library_name</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;mappings&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;field name&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;type&quot;: &quot;keyword&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;analyzer&quot;: &quot;ik_smart&quot;</span></span>\n<span class="line"><span style="color:#24292e;">      },</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;field name2&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;type&quot;: &quot;keyword&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;index&quot;: false</span></span>\n<span class="line"><span style="color:#24292e;">      },</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;field name3&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">          &quot;sub field&quot;{</span></span>\n<span class="line"><span style="color:#24292e;">            &quot;type&quot;: &quot;keyword&quot;</span></span>\n<span class="line"><span style="color:#24292e;">          }</span></span>\n<span class="line"><span style="color:#24292e;">        }</span></span>\n<span class="line"><span style="color:#24292e;">      }</span></span>\n<span class="line"><span style="color:#24292e;">    }</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT /test</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;mappings&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;info&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;type&quot;: &quot;text&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;analyzer&quot;: &quot;ik_smart&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">      },</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;email&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;type&quot;: &quot;keyword&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;index&quot;: &quot;false&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">      },</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;name&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;type&quot;: &quot;object&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">        &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">          &quot;firstName&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">            &quot;type&quot;:&quot;keyword&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">          },</span></span>\n<span class="line"><span style="color:#e1e4e8;">          &quot;lastName&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">            &quot;type&quot;:&quot;keyword&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">          },</span></span>\n<span class="line"><span style="color:#e1e4e8;">        }</span></span>\n<span class="line"><span style="color:#e1e4e8;">      }</span></span>\n<span class="line"><span style="color:#e1e4e8;">    }</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT /test</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;mappings&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;info&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;type&quot;: &quot;text&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;analyzer&quot;: &quot;ik_smart&quot;</span></span>\n<span class="line"><span style="color:#24292e;">      },</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;email&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;type&quot;: &quot;keyword&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;index&quot;: &quot;false&quot;</span></span>\n<span class="line"><span style="color:#24292e;">      },</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;name&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;type&quot;: &quot;object&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">        &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">          &quot;firstName&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">            &quot;type&quot;:&quot;keyword&quot;</span></span>\n<span class="line"><span style="color:#24292e;">          },</span></span>\n<span class="line"><span style="color:#24292e;">          &quot;lastName&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">            &quot;type&quot;:&quot;keyword&quot;</span></span>\n<span class="line"><span style="color:#24292e;">          },</span></span>\n<span class="line"><span style="color:#24292e;">        }</span></span>\n<span class="line"><span style="color:#24292e;">      }</span></span>\n<span class="line"><span style="color:#24292e;">    }</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="check-index-library" tabindex="-1">Check Index Library <a class="header-anchor" href="#check-index-library" aria-label="Permalink to &quot;Check Index Library&quot;">​</a></h3><ul><li>syntax for cheching index library</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /Index_Library_name</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /Index_Library_name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /test</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="delete-index-library" tabindex="-1">Delete Index Library <a class="header-anchor" href="#delete-index-library" aria-label="Permalink to &quot;Delete Index Library&quot;">​</a></h3><ul><li>Syntax for deleting index library</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">DELETE /Index_Library_name</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">DELETE /Index_Library_name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">DELETE /test</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">DELETE /test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="update-index-library" tabindex="-1">Update Index Library <a class="header-anchor" href="#update-index-library" aria-label="Permalink to &quot;Update Index Library&quot;">​</a></h3><p>By default, elasticsearch is forbidden to modify the index database, when the index lirary and mapping created. However, we can add new fields into index library:</p><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT /Index_Library_name/_mapping</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;new field name&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;type&quot;:&quot;integer&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">    }</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT /Index_Library_name/_mapping</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;new field name&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;type&quot;:&quot;integer&quot;</span></span>\n<span class="line"><span style="color:#24292e;">    }</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT /test/_mapping</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;age&quot;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">      &quot;type&quot;:&quot;integer&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">    }</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT /test/_mapping</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;properties&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;age&quot;:{</span></span>\n<span class="line"><span style="color:#24292e;">      &quot;type&quot;:&quot;integer&quot;</span></span>\n<span class="line"><span style="color:#24292e;">    }</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><strong>Note:</strong> the new field name cannot same as before.</li></ul><h2 id="document-operator" tabindex="-1">Document Operator <a class="header-anchor" href="#document-operator" aria-label="Permalink to &quot;Document Operator&quot;">​</a></h2><h2 id="add-new-documents" tabindex="-1">Add new documents <a class="header-anchor" href="#add-new-documents" aria-label="Permalink to &quot;Add new documents&quot;">​</a></h2><ul><li>Syntax</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">POST /Index_library/_doc/document_id</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;field 1&quot;: &quot;value 1&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;field 2&quot;: &quot;value 2&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;field 3&quot;: {</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;sub-field 1&quot;: &quot;value 3&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;sub-field 2&quot;: &quot;value 4&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">POST /Index_library/_doc/document_id</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;field 1&quot;: &quot;value 1&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;field 2&quot;: &quot;value 2&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;field 3&quot;: {</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;sub-field 1&quot;: &quot;value 3&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;sub-field 2&quot;: &quot;value 4&quot;</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">POST /test/_doc/1</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;info&quot;: &quot;This is my first document&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;email&quot;: &quot;jiuxiaohong@gmail.com&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;name&quot;: {</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;firstName&quot;: &quot;Xiaohong&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;lastName&quot;: &quot;Jiu&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">POST /test/_doc/1</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;info&quot;: &quot;This is my first document&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;email&quot;: &quot;jiuxiaohong@gmail.com&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;name&quot;: {</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;firstName&quot;: &quot;Xiaohong&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;lastName&quot;: &quot;Jiu&quot;</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="check-document" tabindex="-1">Check document <a class="header-anchor" href="#check-document" aria-label="Permalink to &quot;Check document&quot;">​</a></h2><ul><li>Syntax</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /Index_library_Name/_doc/document_id</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /Index_library_Name/_doc/document_id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GET /test/_doc/1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GET /test/_doc/1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="delete-document" tabindex="-1">Delete document <a class="header-anchor" href="#delete-document" aria-label="Permalink to &quot;Delete document&quot;">​</a></h2><ul><li>Syntax</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">DELETE /Index_library_Name/_doc/document_id</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">DELETE /Index_library_Name/_doc/document_id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">DELETE /test/_doc/1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">DELETE /test/_doc/1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="update-document" tabindex="-1">Update document <a class="header-anchor" href="#update-document" aria-label="Permalink to &quot;Update document&quot;">​</a></h2><h3 id="full-scale-modification-global-modification" tabindex="-1">Full-scale modification (global modification) <a class="header-anchor" href="#full-scale-modification-global-modification" aria-label="Permalink to &quot;Full-scale modification (global modification)&quot;">​</a></h3><p>It will delete the old document, then insert new ducoment.</p><ul><li>Syntax</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT /Index_library_Name/_doc/document_id</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;field 1&quot;: &quot;value 1&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;field 2&quot;: &quot;value 2&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT /Index_library_Name/_doc/document_id</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;field 1&quot;: &quot;value 1&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;field 2&quot;: &quot;value 2&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PUT /test/_doc/1</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;info&quot;: &quot;This is my first document&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;email&quot;: &quot;matiao@gmail.com&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &quot;name&quot;: {</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;firstName&quot;: &quot;Tiao&quot;,</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;lastName&quot;: &quot;Ma&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PUT /test/_doc/1</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;info&quot;: &quot;This is my first document&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;email&quot;: &quot;matiao@gmail.com&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">  &quot;name&quot;: {</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;firstName&quot;: &quot;Tiao&quot;,</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;lastName&quot;: &quot;Ma&quot;</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="incremental-change-local-modification" tabindex="-1">Incremental change (local modification) <a class="header-anchor" href="#incremental-change-local-modification" aria-label="Permalink to &quot;Incremental change (local modification)&quot;">​</a></h3><p>It need user specify the field.</p><ul><li>Syntax</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">POST /Index_library_Name/_update/document_id</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &#39;doc&#39;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;field 1&quot;: &quot;new value&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">POST /Index_library_Name/_update/document_id</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &#39;doc&#39;:{</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;field 1&quot;: &quot;new value&quot;</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>Example</li></ul><div class="language-dsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dsl</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">POST /test/_update/1</span></span>\n<span class="line"><span style="color:#e1e4e8;">{</span></span>\n<span class="line"><span style="color:#e1e4e8;">  &#39;doc&#39;:{</span></span>\n<span class="line"><span style="color:#e1e4e8;">    &quot;email&quot;: &quot;matiao@gmail.com&quot;</span></span>\n<span class="line"><span style="color:#e1e4e8;">  }</span></span>\n<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">POST /test/_update/1</span></span>\n<span class="line"><span style="color:#24292e;">{</span></span>\n<span class="line"><span style="color:#24292e;">  &#39;doc&#39;:{</span></span>\n<span class="line"><span style="color:#24292e;">    &quot;email&quot;: &quot;matiao@gmail.com&quot;</span></span>\n<span class="line"><span style="color:#24292e;">  }</span></span>\n<span class="line"><span style="color:#24292e;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="restclient" tabindex="-1">RestClient <a class="header-anchor" href="#restclient" aria-label="Permalink to &quot;RestClient&quot;">​</a></h2><h3 id="restclient-operate-index-library" tabindex="-1">RestClient operate Index library <a class="header-anchor" href="#restclient-operate-index-library" aria-label="Permalink to &quot;RestClient operate Index library&quot;">​</a></h3><p>It is a <a href="https://www.elastic.co/guide/en/elasticsearch/client/index.html" target="_blank" rel="noreferrer">client provided by elasticsearc</a> used to operate ES. The essence of these clients is to assemble DLS statements and send them to ES via http requests.</p><ul><li>Create index library</li><li>Delete inde library</li><li>Checking for the existence of indexed libraries</li></ul>',74)];const o=s(p,[["render",function(s,n,l,p,o,i){return a(),e("div",null,t)}]]);export{l as __pageData,o as default};
